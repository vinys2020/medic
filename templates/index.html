<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnóstico Médico</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="icon" href="{{ url_for('static', filename='img/icologo.png') }}" />


</head>

<body">
    <nav class="navbar navbar-expand-lg navbar-dark " style="background-color: rgb(48, 110, 253);" id="myNavbar">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}">
                <img src="{{ url_for('static', filename='img/speak.png') }}" alt="Isologotipo Diagnóstico Médico" width="100" height="100" />
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="{{ url_for('index') }}">Inicio</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Enfermedades Comunes</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{{ url_for('enfermedades') }}#tipos">Tipos de Enfermedades</a></li>
                            <li><a class="dropdown-item" href="{{ url_for('enfermedades') }}#sintomas">Buscar Enfermedades</a></li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link " aria-current="page" href="{{ url_for('estadisticas') }}">Estadísticas de Diagnósticos</a>
                    </li>
                    
                    
                    </li>
                    <li class="nav-item">
                        <a class="nav-link custom-button" href="#" data-bs-toggle="modal" data-bs-target="#contactModal">Contacto</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="pt-0  bg-black">

        <div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="contactModalLabel">Centro de Ayuda y Contacto</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>
                    <div class="modal-body">
                        <div class="text-center">
                            <img src="{{ url_for('static', filename='img/diagnostico medico.png') }}" 
                                 alt="Imagen de Ayuda" class="img-fluid" style="border-radius: 15px; width: 250px;">
                            <h2 class="mt-3">Centro de Soporte al Paciente</h2>
                            <p>Asistencia para Diagnóstico Médico en Línea</p>
                            <p>Correo electrónico de soporte: <a href="mailto:soporte@diagnostico.com" style="color: blue;">soporte@diagnostico.com</a></p>
                            <p>WhatsApp: <a href="https://wa.me/5493814685932" target="_blank" style="color: green;">+54 9 381 4685-932</a></p>
                            
                            <div class="social-media mt-3">
                                <a href="https://www.facebook.com/diagnostico_medico" target="_blank" class="btn btn-outline-primary">
                                    <i class="fab fa-facebook"></i> Facebook
                                </a>
                                <a href="https://twitter.com/diagnostico_medico" target="_blank" class="btn btn-outline-info">
                                    <i class="fab fa-twitter"></i> Twitter
                                </a>
                                <a href="https://www.instagram.com/diagnostico_medico/" target="_blank" class="btn btn-outline-danger">
                                    <i class="fab fa-instagram"></i> Instagram
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
        
  
        
      </section>

      <section class="pt-5">

        <div class="container">
            <section class="row text-white align-items-center mb-0">
                <article class="col-12 col-lg-5 mb-5 text-center">
                    <h1 style="color: black;">Hola, Bienvenido!</h1>
                    <p class="slide-up" style="color: black;">
                        Nos dedicamos a brindar diagnósticos médicos precisos y accesibles para cuidar tu salud. 
                        Nuestro compromiso es ofrecerte una experiencia confiable, con tecnología avanzada y un enfoque personalizado 
                        que te permita tomar decisiones informadas sobre tu bienestar.
                    </p>
                </article>
    
                <article class="col-12 col-lg-7 mb-5 text-center"> 
                    <img
                        class="img-fluid" 
                        style="border-radius: 5%; max-width: 80%;" 
                        src="{{ url_for('static', filename='img/fotodoctora.png') }}"
                        alt="¿Necesitas un increíble sitio web?"
                    />
                </article>
    
            </section>


            <section id="diagnostico">
                <article class="col-12 text-center slide-up" style="margin-top: 50px; margin-bottom: 300px;">
                    <div class="diagnostic-container my-5">
                        <h1 class="text-center mb-4" style="color: black;">Diagnóstico Médico</h1>
                        
                        <div class="row">

                            <div class="col-6">
                                <div class="form-group">
                                    <label for="edad" style="color: black;">Edad:</label>
                                    <input type="number" class="form-control" id="edad" placeholder="Ejemplo: 30" required />
                                </div>
                            </div>

                            <div class="col-6">
                                <div class="form-group">
                                    <label for="sexo" style="color: black;">Sexo:</label>
                                    <select class="form-control" id="sexo">
                                        <option value="M">Masculino</option>
                                        <option value="F">Femenino</option>
                                    </select>
                                </div>
                            </div>
            
                            <div class="col-12 mt-3">
                                <div class="form-group">
                                    <label for="fuma" style="color: black;">¿Fuma?</label>
                                    <select class="form-control" id="fuma">
                                        <option value="0">No</option>
                                        <option value="1">Sí</option>
                                    </select>
                                </div>
                            </div>
            
                            <div class="col-12 mt-3">
                                <div class="form-group">
                                    <label for="actividad-fisica" style="color: black;">¿Hace actividad física regularmente?</label>
                                    <select class="form-control" id="actividad-fisica">
                                        <option value="0">No</option>
                                        <option value="1">Sí</option>
                                    </select>
                                </div>
                            </div>
            
                            <div class="col-12 mt-3">
                                <div class="form-group">
                                    <label for="historial-familiar" style="color: black;">¿Tiene historial familiar de alguna enfermedad?</label>
                                    <select class="form-control" id="historial-familiar">
                                        <option value="0">No</option>
                                        <option value="1">Sí</option>
                                    </select>
                                </div>
                            </div>
                            
            
                            <div class="col-6 mt-3">
                                <div class="form-group">
                                    <label for="dieta" style="color: black;">¿Tiene una dieta poco saludable?</label>
                                    <select class="form-control" id="dieta">
                                        <option value="0">No</option>
                                        <option value="1">Sí</option>
                                    </select>
                                </div>
                            </div>
            
                            <div class="col-6 mt-3">
                                <div class="form-group">
                                    <label for="estres" style="color: black;">¿Sufre de alto estrés?</label>
                                    <select class="form-control" id="estres">
                                        <option value="0">No</option>
                                        <option value="1">Sí</option>
                                    </select>
                                </div>
                            </div>
            
                            <div class="col-6 mt-3">
                                <div class="form-group">
                                    <label for="visitas-medico" style="color: black;">¿Visita regularmente al médico?</label>
                                    <select class="form-control" id="visitas-medico">
                                        <option value="0">No</option>
                                        <option value="1">Sí</option>
                                    </select>
                                </div>
                            </div>
            
                            <div class="col-6 mt-3">
                                <div class="form-group">
                                    <label for="sueño" style="color: black;">¿Cuántas horas duerme por noche?</label>
                                    <input type="number" class="form-control" id="sueño" placeholder="Ejemplo: 7" />
                                </div>
                            </div>
            
                        </div>
            
                        <div class="form-group mt-3">
                            <label for="sintomas" style="color: black; margin-bottom: 20px;">Ingrese los síntomas (separados por coma):</label>
                            <input type="text" class="form-control" id="sintomas" placeholder="Ejemplo: fiebre alta, tos, dolor de cabeza" />
                        </div>
            
                        <div class="d-flex justify-content-center align-items-center mt-4">
                            <button class="btn btn-danger me-2" id="iniciar-diagnostico">Iniciar Diagnóstico</button>
                        </div>
            
                        <div id="pregunta-container" style="display: none;" class="mt-4">
                            <p id="pregunta" class="font-weight-bold" style="color: black;"></p>
                            <input type="hidden" id="enfermedad" value="" />
                            <button class="btn btn-success" id="si-button">Sí</button>
                            <button class="btn btn-danger" id="no-button">No</button>
                        </div>
            
                        <div id="resultados-container" style="display: none;" class="mt-4">
                            <h2 style="color: black; margin-bottom: 20px; margin-top: 50px;">Resultados</h2>
                            <ul id="resultados" class="list-group"></ul>
                        </div>

                                  
                        
                    </div>
                </article>
            </section>
            
            
        </div>
        <button class="scroll-top " style="position: fixed; bottom: 20px; right: 20px; display: none;">
            <a
              href="https://api.whatsapp.com/send?phone=5493814685931"
              target="_blank"
              style="color:rgb(15, 218, 15);"><i class="bi bi-whatsapp fs-3"
              title="Envíanos un WhatsApp!"></i
            ></a>
          </button>
    </section>

    <script>
        document.getElementById("guardar-riesgo").addEventListener("click", function() {
            const edad = document.getElementById("edad").value;
            const sexo = document.getElementById("sexo").value;
            const fuma = document.getElementById("fuma").value;
            const actividadFisica = document.getElementById("actividadFisica").value;
            const historialFamiliar = document.getElementById("historialFamiliar").value;
            const dieta = document.getElementById("dieta").value;
            const estres = document.getElementById("estres").value;
            const visitasMedico = document.getElementById("visitasMedico").value;
            const sueño = document.getElementById("sueño").value;
            const sintomas = document.getElementById("sintomas").value;

            if (!edad || !sintomas) {
                alert("Por favor, complete todos los campos requeridos.");
                return;
            }

            const data = {
                edad,
                sexo,
                fuma,
                actividad_fisica,
                historial_familiar,
                dieta,
                estres,
                visitas_medico,
                sueño,
                sintomas
            };

            console.log("Datos enviados al backend:", data);

            fetch('/guardar_riesgo', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                alert(result.message);  
                console.log(result);     
            })
            .catch(error => {
                console.error('Error al guardar datos:', error);  
            });
        });
    </script>
    
    
    

    

    <script>
        document.getElementById("iniciar-diagnostico").onclick = function() {
            const edad = document.getElementById("edad").value.trim();
            const sintomas = document.getElementById("sintomas").value.trim();
    
            if (!edad || !sintomas) {
                alert("Por favor, complete todos los campos requeridos.");
                return;
            }
    
            fetch('/diagnosticar', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ sintomas: sintomas })
            })
            .then(response => response.json())
            .then(data => {
                if (data.pregunta) {
                    document.getElementById("pregunta").innerText = data.pregunta;
                    document.getElementById("enfermedad").value = data.enfermedad;
                    document.getElementById("pregunta-container").style.display = 'block';
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error('Error:', error));
        };
    
        document.getElementById("si-button").onclick = function() {
            const enfermedad = document.getElementById("enfermedad").value;
            console.log(enfermedad);
            enviarRespuesta(true);
        };
        
        document.getElementById("no-button").onclick = function() {
            const enfermedad = document.getElementById("enfermedad").value;
            console.log(enfermedad);
            enviarRespuesta(false);
        };
    
        function enviarRespuesta(respuesta) {
            const enfermedad = document.getElementById("enfermedad").value;
    
            fetch('/respuesta', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    enfermedad: enfermedad,
                    respuesta: respuesta
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.pregunta) {
                    document.getElementById("pregunta").innerText = data.pregunta;
                    document.getElementById("enfermedad").value = data.enfermedad;
                } else {
                    mostrarResultados(data);
                }
            })
            .catch(error => console.error('Error:', error));
        }
    
        function mostrarResultados(data) {
            const resultadosList = document.getElementById("resultados");
            resultadosList.innerHTML = '';
    
            const resultadosGuardar = data.map(item => ({
                enfermedad: item.enfermedad,
                porcentaje: item.porcentaje,
                tratamiento: item.tratamiento,
                accion_descartar: item.accion_descartar
            }));
    
            data.forEach(item => {
                const li = document.createElement("li");
                li.className = "list-group-item";
                li.innerText = `${item.enfermedad} - ${item.porcentaje}% - Tratamiento: ${item.tratamiento} - Acción: ${item.accion_descartar}`;
                resultadosList.appendChild(li);
            });
    
            const edad = document.getElementById("edad") ? document.getElementById("edad").value : '';
            const sexo = document.getElementById("sexo") ? document.getElementById("sexo").value : '';
            const fuma = document.getElementById("fuma") ? document.getElementById("fuma").value : '';
            const actividad_fisica = document.getElementById("actividad_fisica") ? document.getElementById("actividad_fisica").value : '';
            const historial_familiar = document.getElementById("historial_familiar") ? document.getElementById("historial_familiar").value : '';
            const dieta = document.getElementById("dieta") ? document.getElementById("dieta").value : '';
            const estres = document.getElementById("estres") ? document.getElementById("estres").value : '';
            const visitas_medico = document.getElementById("visitas_medico") ? document.getElementById("visitas_medico").value : '';
            const sueño = document.getElementById("sueño") ? document.getElementById("sueño").value : '';
            const sintomas = document.getElementById("sintomas") ? document.getElementById("sintomas").value : '';
    
            fetch('/guardar_riesgo', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    resultados: resultadosGuardar,
                    edad: edad,
                    sexo: sexo,
                    fuma: fuma,
                    actividad_fisica: actividad_fisica,
                    historial_familiar: historial_familiar,
                    dieta: dieta,
                    estres: estres,
                    visitas_medico: visitas_medico,
                    sueño: sueño,
                    sintomas: sintomas
                })
            })
            .then(response => response.json())
            .then(responseData => alert(responseData.message))
            .catch(error => console.error('Error:', error));
    
            document.getElementById("pregunta-container").style.display = 'none';
            document.getElementById("resultados-container").style.display = 'block';
        }
    
    </script>


    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"
    ></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
</body>
<footer class=" p-3" style="background-color: rgb(20, 40, 100);">
    <div class="container text-center">
      <nav class="d-flex justify-content-evenly">
        <a href="https://facebook.com" target="_blank" aria-label="Facebook">
          <i class="bi bi-facebook fs-3"></i>
        </a>
        <a href="https://twitter.com" target="_blank" aria-label="Twitter">
          <i class="bi bi-twitter fs-3"></i>
        </a>
        <a href="https://github.com" target="_blank" aria-label="GitHub">
          <i class="bi bi-github fs-3"></i>
        </a>
        <a href="https://youtube.com" target="_blank" aria-label="YouTube">
          <i class="bi bi-youtube fs-3"></i>
        </a>
        <a href="https://www.instagram.com/publik.tuc/" target="_blank" aria-label="Instagram">
          <i class="bi bi-instagram fs-3"></i>
        </a>
        <a href="https://m.me/user" target="_blank" aria-label="Messenger">
          <i class="bi bi-messenger fs-3"></i>
        </a>
        <a href="https://api.whatsapp.com/send?phone=5493814685931" target="_blank" aria-label="WhatsApp">
          <i class="bi bi-whatsapp fs-3"></i>
        </a>
      </nav>
      
      <article class="col-12 col-md-12 col-lg-12 d-flex justify-content-center">
        <br>
      </article>

      <small class="text-white">
        &copy; 2024 Diagnóstico Salud. Diagnósticos precisos y atención médica personalizada desde hace más de 5 años. Todos los derechos reservados.
        <a href="https://www.instagram.com/facundolezcano_/" target="_blank"
            class="text-info">Cuenta personal</a
        >.
      </small>
    </div>

  </footer>

  <script>
        const navbar = document.getElementById('myNavbar');
        let lastScrollY = window.scrollY;

        // Establecer una transición suave en CSS para el navbar
        navbar.style.transition = 'top 0.3s ease-in-out'; // Esto aplica una transición suave de 0.3 segundos

        window.addEventListener('wheel', function(event) {
            if (event.deltaY > 0) {
                // Si el desplazamiento es hacia abajo, ocultamos el navbar
                navbar.style.top = "-20px"; // Ajusta el valor según el tamaño de tu navbar
            } else {
                // Si el desplazamiento es hacia arriba, mostramos el navbar
                navbar.style.top = "0"; // Regresa el navbar a su posición original
            }
        });
    </script>

  <script>
        window.addEventListener('scroll', function() {
        const footer = document.querySelector('footer');
        const scrollHeight = document.documentElement.scrollHeight;
        const scrollTop = window.scrollY + window.innerHeight;

        if (scrollTop >= scrollHeight - 10) {
            footer.style.bottom = '0'; 
        } else {
            footer.style.bottom = '-100px'; 
        }
    });
  </script>

</html>
